/* Minimal order page styles — follow base.css visual style */
.order {
  padding: 100px 0 60px;
}
.order h1 { 
  font-size: 1.6rem; 
  margin-bottom: 1rem; 
}
.order h2 { 
  font-size: 1.15rem; 
  margin: 0.75rem 0; 
}
.catalog-list { 
  display: grid; 
  grid-template-columns: repeat(auto-fit, minmax(160px, 1fr)); 
  gap: 14px; 
  margin: 14px 0 20px; 
}
.catalog-item { 
  padding: 12px; 
  border-radius: 8px; 
  background: var(--var-body-bg); 
  cursor: pointer; 
  text-align: center; 
}
.catalog-item.selected { 
  border-color: #000; 
  box-shadow: 0 6px 18px rgba(0,0,0,0.06); 
}
.catalog-item img { 
  width: 100%; 
  height: 120px; 
  object-fit: cover; 
  border-radius: 6px; 
}
.catalog-list.catalog-grid { 
  display: grid; 
  grid-template-columns: repeat(3, 1fr);
  gap: 12px; 
  margin: 14px 0 20px; 
}
.pages-select { 
  margin: 12px 0 20px; 
}
.uploader-grid { 
  display: grid; 
  grid-template-columns: repeat(3, 1fr); 
  gap: 12px; 
  margin-top: 18px; 
}
.uploader-cell { 
  border: 1px dotted rgba(0,0,0,0.12); 
  border-radius: 10px; 
  padding: 18px; 
  min-height: 220px; 
  display:flex; 
  flex-direction:column; 
  align-items:center; 
  justify-content:center; 
  position: relative; 
  background: var(--var-body-bg); 
  transition: transform 220ms ease, opacity 220ms ease, box-shadow 220ms ease; 
}
.uploader-cell input[type=file] { 
  position: absolute; 
  inset: 0; 
  opacity: 0; 
  cursor: pointer; 
}
.uploader-cell img.preview { 
  max-width: 100%; 
  height: 120px; 
  object-fit: cover; 
  border-radius: 6px; 
  transition: transform 180ms ease; 
  cursor: zoom-in; 
}
.uploader-cell .num { 
  position:absolute; 
  left:8px; 
  top:8px; 
  background: rgba(0,0,0,0.06); 
  padding:6px 8px; 
  border-radius:6px; 
  font-weight:700; 
}
.uploader-cell .delete-btn {
  position:absolute; 
  right:6px; 
  top:6px; 
  background: rgba(255,255,255,0.9); 
  border:1px solid rgba(0,0,0,0.06); 
  padding:6px 10px; 
  border-radius:6px; 
  font-size:0.9rem; 
  cursor:pointer; 
}
.uploader-cell.drag-over { 
  outline: 2px dashed rgba(0,0,0,0.14); 
  transform: scale(1.02); 
  box-shadow: 0 6px 18px rgba(0,0,0,0.06);
 }
.uploader-cell.dragging { 
  opacity: 0.5; 
  transform: scale(0.98); 
}
.controls { 
  margin-top: 18px; 
  display:flex; 
  gap:10px; 
  justify-content:flex-end; 
}
.muted { 
  color: var(--text-color-sec); 
}

/* Top controls */
#uploader-controls { 
  display:flex; 
  justify-content:space-between; 
  align-items:center; 
  margin:10px 0; 
}
#uploader-controls .uc-left { 
  display:flex; 
  align-items:center; 
}
#uploader-controls .uc-right { 
  display:flex; 
  align-items:center; 
  gap:8px; 
}
#uploader-controls .btn {
  margin: 0 4px; 
}
#uploader-controls .btn.danger { 
  background: #ffeded; 
  border:1px solid #ff5b5b; 
  color:#a00000; 
}
#uploader-controls .btn.danger:hover { 
  background:#ffdede; 
}

/* bottom pager (moved near submit/back) */
.bottom-pager { 
  display:flex; 
  justify-content:center; 
  align-items:center; 
  gap:12px; 
}
.bottom-pager .pager { 
  display:flex; 
  gap:8px; 
}
.bottom-pager #view-info { 
  margin-left:8px; 
  color:var(--text-color-sec); 
}

/* lightbox */
.lightbox { 
  position:fixed; 
  inset:0; 
  display:flex; 
  align-items:center;
  justify-content:center; 
  background:rgba(0,0,0,0.64); 
  z-index:2000; 
}
.lightbox-inner { 
  background:var(--var-body-bg); 
  padding:12px; 
  border-radius:8px; 
  display:flex; 
  flex-direction:column; 
  align-items:center; 
  gap:10px; 
  max-width:96%; 
  max-height:96%; 
}
.lightbox-inner img { 
  max-width:100%; 
  max-height:80vh; 
  object-fit:contain; 
  border-radius:6px; 
}

/* moving clone animation */
.move-clone { 
  transition:transform .42s cubic-bezier(.2,.9,.2,1),opacity .42s ease; 
  box-shadow:0 10px 30px rgba(0,0,0,0.18); 
  border-radius:8px; 
  overflow:hidden; 
}

/* Responsive breaks: desktop:3 columns; tablet:2; mobile:1 */
@media (max-width:900px) {
  .catalog-list.catalog-grid { 
    grid-template-columns:repeat(2,1fr); 
  }
  .uploader-grid { 
    grid-template-columns:repeat(2,1fr); 
  }
  .uploader-grid.single-view { 
    grid-template-columns:repeat(2,1fr); 
  }
}
@media (max-width:767px) {
  /* below 768 hide top toggle (no grid view on small screens) */
  #toggle-view { 
    display:none !important; 
  }
  .catalog-list.catalog-grid { 
    grid-template-columns:repeat(1,1fr); 
  }
  .uploader-grid { 
    grid-template-columns:repeat(1,1fr); 
  }
  /* single-view on mobile should be block of compact items stacked */
  .uploader-grid.single-view { 
    display:block; 
  }
  .uploader-grid.single-view .uploader-cell { 
    width:100%; 
    max-width:100%; 
    box-sizing:border-box; 
    margin:8px auto; 
    min-height:140px; 
  }
  /* center content */
  .order .container, .order { 
    display:flex; 
    flex-direction:column; 
    align-items:center; 
  }
  .order .container { 
    padding:20px; 
  }
  /* hide horizontal scroll on small devices */
  html,body { 
    overflow-x:hidden; 
  }
}

/* ensure global no horizontal scroll as defensive measure */
html,body { 
  box-sizing:border-box; 
}
*,:before,:after { 
  box-sizing:inherit; 
}
/* Minimal order page styles — follow base.css visual style */
.order {
  padding: 100px 0 60px;
}
.order h1 { 
  font-size: 1.6rem; 
  margin-bottom: 1rem; 
}
.order h2 { 
  font-size: 1.15rem; 
  margin: 0.75rem 0; 
}
.catalog-list { 
  display: grid; 
  grid-template-columns: repeat(auto-fit, minmax(160px, 1fr)); 
  gap: 14px; 
  margin: 14px 0 20px; 
}
.catalog-item { 
  .uploader-grid { display: grid; grid-template-columns: repeat(3, 1fr); gap: 12px; margin-top: 18px; width:100%; box-sizing:border-box; }
  padding: 12px; 
  border-radius: 8px; 
  background: var(--var-body-bg); 
  cursor: pointer; 
  text-align: center; 
}
.catalog-item.selected { 
  border-color: #000; 
  box-shadow: 0 6px 18px rgba(0,0,0,0.06); 
}
.catalog-item img { 
  .uploader-grid.single-view { display: grid; grid-template-columns: repeat(3, 1fr); gap: 12px; width:100%; box-sizing:border-box; }
  .uploader-grid.single-view .uploader-cell { min-height: 220px; padding:18px; max-width:100%; box-sizing:border-box; }
  object-fit: cover; 
  border-radius: 6px; 
}
.catalog-list.catalog-grid { 
  display: grid; 
  grid-template-columns: repeat(3, 1fr);
  gap: 12px; 
  margin: 14px 0 20px; 
}
.catalog-list.catalog-grid .catalog-item { 
  @media (max-width: 900px) {
    .order .container, .order { 
      display:flex; 
      flex-direction:column; 
      align-items:center; 
    }
    .catalog-list.catalog-grid { 
      grid-template-columns: repeat(2,1fr); 
    }
    .uploader-grid { 
      grid-template-columns: repeat(2,1fr); 
    }
  }
  @media (max-width: 480px) {
    /* мобильные: запретить разворот (переключение) — всегда показываем single-view-режим окна */
    .catalog-list.catalog-grid { grid-template-columns: repeat(1,1fr); }
    .uploader-grid { grid-template-columns: repeat(1,1fr); }
    .order .container { padding: 20px; }
    /* Убираем возможность показать развёрнутую сетку на мобильных: скрываем переключатель */
    #toggle-view { display:none !important; }
    /* single-view на мобильном должен показывать элементы компактно (те же размеры, что в grid),
       и не вызывать горизонтальную прокрутку. Показываем максимум MOBILE_WINDOW_SIZE (10) элементов,
       навигация остаётся (Prev/Next) для переключения между окнами по 10 элементов. */
    .uploader-grid.single-view { display:block; }
    .uploader-grid.single-view .uploader-cell { width:100%; max-width:100%; box-sizing:border-box; margin: 8px auto; min-height:160px; }
    /* Предотвратить горизонтальную прокрутку */
    body, html { overflow-x: hidden; }
  }
  padding: 14px; 
  border: 1px dotted rgba(0,0,0,0.12); 
  border-radius: 8px; 
  min-height: 160px; 
  display:flex; 
  flex-direction:column; 
  align-items:center; 
  justify-content:center; 
}
.pages-select { 
  margin: 12px 0 20px; 
}
.uploader-grid { 
  display: grid; 
  grid-template-columns: repeat(3, 1fr); 
  gap: 12px; 
  margin-top: 18px; 
}
.uploader-cell { 
  border: 1px dotted rgba(0,0,0,0.12); 
  border-radius: 10px; 
  padding: 18px; 
  min-height: 220px; 
  display:flex; 
  flex-direction:column; 
  align-items:center; 
  justify-content:center; 
  position: relative; 
  background: var(--var-body-bg); 
  transition: transform 220ms ease, opacity 220ms ease, box-shadow 220ms ease; 
}
.uploader-cell input[type=file] { 
  position: absolute; 
  inset: 0; 
  opacity: 0; 
  cursor: pointer; 
}
.uploader-cell img.preview { 
  max-width: 100%; 
  height: 120px; 
  object-fit: cover; 
  border-radius: 6px; 
  transition: transform 180ms ease; 
  cursor: zoom-in; 
}
.uploader-cell .num { 
  position:absolute; 
  left:8px; 
  top:8px; 
  background: rgba(0,0,0,0.06); 
  padding:6px 8px; 
  border-radius:6px; 
  font-weight:700; 
}
.uploader-cell .delete-btn {
  position:absolute; 
  right:6px; 
  top:6px; 
  background: rgba(255,255,255,0.9); 
  border:1px solid rgba(0,0,0,0.06); 
  padding:6px 10px; 
  border-radius:6px; 
  font-size:0.9rem; 
  cursor:pointer; 
}
.uploader-cell.drag-over { 
  outline: 2px dashed rgba(0,0,0,0.14); 
  transform: scale(1.02); 
  box-shadow: 0 6px 18px rgba(0,0,0,0.06);
 }
.uploader-cell.dragging { 
  opacity: 0.5; 
  transform: scale(0.98); 
}
.controls { 
  margin-top: 18px; 
  display:flex; 
  gap:10px; 
  justify-content:flex-end; 
}
.muted { 
  color: var(--text-color-sec); 
}

/* single page view */
.uploader-grid.single-view { 
  display: grid; 
  grid-template-columns: repeat(3, 1fr); 
  gap: 12px; 
}
.uploader-grid.single-view .uploader-cell { 
  min-height: 220px; 
  padding:18px; 
}
#uploader-controls .btn.danger { 
  background: #ffeded; 
  border:1px solid #ff5b5b; 
  color:#a00000; 
}
#uploader-controls .btn.danger:hover { background:#ffdede; }

/* Лайтбокс */
.lightbox { position: fixed; inset:0; display:flex; align-items:center; justify-content:center; background: rgba(0,0,0,0.6); z-index:2000; }
.lightbox-inner { background: var(--var-body-bg); padding: 12px; border-radius: 8px; display:flex; flex-direction:column; align-items:center; gap:10px; max-width: 96%; max-height: 96%; }
.lightbox-inner img { max-width: 100%; max-height: 80vh; object-fit: contain; border-radius:6px; }

/* Центрирование для мобильных/планшетов */
@media (max-width: 900px) {
  .order .container, .order { display:flex; flex-direction:column; align-items:center; }
  .catalog-list.catalog-grid { grid-template-columns: repeat(2,1fr); }
  .uploader-grid { grid-template-columns: repeat(2,1fr); }
}
@media (max-width: 480px) {
  .catalog-list.catalog-grid { grid-template-columns: repeat(1,1fr); }
  .uploader-grid { grid-template-columns: repeat(1,1fr); }
  .order .container { padding: 20px; }
}

/* controls */
#uploader-controls { display:flex; justify-content:space-between; align-items:center; margin:10px 0; }
#uploader-controls .uc-left { display:flex; align-items:center; }
#uploader-controls .uc-right { display:flex; align-items:center; gap:8px; }
#uploader-controls .btn { margin: 0 4px; }

/* moving clone animation */
.move-clone { transition: transform 420ms cubic-bezier(.2,.9,.2,1), opacity 420ms ease; box-shadow: 0 10px 30px rgba(0,0,0,0.18); border-radius:8px; overflow:hidden; }

@media (max-width: 900px) {
  .uploader-grid { grid-template-columns: repeat(2, 1fr); }
}
@media (max-width: 480px) {
  .uploader-grid { grid-template-columns: repeat(1, 1fr); }
  .catalog-list { grid-template-columns: repeat(auto-fit, minmax(140px, 1fr)); }
  .uploader-cell { min-height: 200px; }
}
